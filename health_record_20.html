
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>개인 건강기록</title>

<style>
body { font-family: sans-serif; background:#f5f5f5; padding:15px; }
.container { background:white; padding:15px; border-radius:10px; max-width:500px; margin:auto; }
label { font-weight:bold; margin-top:10px; display:block; }
input, textarea { width:100%; padding:8px; margin-top:5px; border-radius:5px; border:1px solid #ccc;}
button { margin-top:15px; padding:10px; width:100%; background:#4CAF50; color:white; border:none; border-radius:8px; }
.status { font-size:13px; margin-top:8px; color:green; }
</style>
</head>

<body>
<div class="container">
<h2>개인 건강기록</h2>

<label>이름</label>
<input id="name">

<label>병력</label>
<textarea id="history"></textarea>

<label>병원</label>
<input id="hospital">

<label>보호자</label>
<textarea id="guardian"></textarea>

<label>기타</label>
<textarea id="etc"></textarea>

<button onclick="saveData()">저장</button>
<div class="status" id="status"></div>
</div>

<script>
const SERVER_URL = "https://script.google.com/macros/s/AKfycbzoA4C6KhYLgRrIGt7aUvom5DN9JysXoZyk15H9_QmUBRfgOXmfGIbSN-QsHKH-H1u8/exec";
const PAGE_ID = "user20";

function loadData() {{
  fetch(SERVER_URL + "?id=" + PAGE_ID)
    .then(res => res.json())
    .then(data => {{
      if (!data) return;
      name.value = data.name || "";
      history.value = data.history || "";
      hospital.value = data.hospital || "";
      guardian.value = data.guardian || "";
      etc.value = data.etc || "";
    }});
}}

function saveData() {{
  const body = {{
    name: name.value,
    history: history.value,
    hospital: hospital.value,
    guardian: guardian.value,
    etc: etc.value
  }};

  fetch(SERVER_URL + "?id=" + PAGE_ID, {{
    method: "POST",
    body: JSON.stringify(body)
  }})
  .then(() => status.innerText = "저장 완료 ✅")
  .catch(() => status.innerText = "저장 실패 ❌");
}}

loadData();
</script>
</body>
</html>
